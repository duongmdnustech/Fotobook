<% content_for :head do %>
  <%= stylesheet_link_tag "definition", "data-turbo-track": "reload" %>
  <%= stylesheet_link_tag "navbar", "data-turbo-track": "reload" %>
<% end %>

<nav class="navbar bg-primary" data-bs-theme="dark">
  <div class="container-fluid d-flex">
    <div class="title">
      <%= image_tag "logo.png" %>
      Fotobook
    </div>
    <% if user_signed_in? %>
      <form class="d-flex" role="search">
        <div class="input-group">
          <span class="input-group-text" id="basic-addon1">
            <svg width="30px" height="30px" viewBox="0 0 1024 1024" class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M460 459.3m-245.2 0a245.2 245.2 0 1 0 490.4 0 245.2 245.2 0 1 0-490.4 0Z" fill="#E1F0FF"></path><path d="M460 719c-69.4 0-134.6-27-183.6-76.1s-76.1-114.3-76.1-183.6c0-69.4 27-134.6 76.1-183.6s114.3-76.1 183.6-76.1c69.4 0 134.6 27 183.6 76.1s76.1 114.3 76.1 183.6c0 69.4-27 134.6-76.1 183.6S529.4 719 460 719z m0-490.4c-61.6 0-119.6 24-163.1 67.6-43.6 43.6-67.6 101.5-67.6 163.1s24 119.6 67.6 163.1C340.4 666 398.4 690 460 690s119.6-24 163.1-67.6c43.6-43.6 67.6-101.5 67.6-163.1s-24-119.6-67.6-163.1c-43.5-43.6-101.5-67.6-163.1-67.6z" fill="#446EB1"></path><path d="M640.6 630.6c8.7-8.7 22.8-8.7 31.5 0L802 760.5c8.6 8.9 8.3 23-0.5 31.5-8.6 8.3-22.3 8.3-31 0L640.6 662.1c-8.4-8.6-8.1-22.6 0-31.5z" fill="#446EB1"></path></g></svg>
          </span>
          <input type="search" class="form-control" placeholder="Search Photo / Album" aria-label="Search"
          width="100%">
        </div>
      </form>
    <% end %>

    <%# 1. Determine the URL first %>
    <% target_url = if page == 'signup'
                      
                    elsif page == 'login'
                      
                    else
                      "/profile"
                    end %>

    <%# 2. Create the link using the block syntax %>
    <% if page == 'signup' %>
      <%= link_to "/auth/login", class: "item" do %>
        Login
      <% end %>
    <% elsif page == 'login' %>
      <%= link_to "/auth/register", class: "item" do %>
        Sign up
      <% end %>
    <% else %>
      <div class="item">
        <div class="home d-flex gap-2 align-items-center">
          <%= link_to "/profile", class: "text-decoration-none text-white" do %>
            <div class="profile d-flex gap-2 align-items-center text-decoration-none">
              <%= render "users/shared/avatar" %>
              <div class="text-decoration-none"><%= @user.lname + " " + @user.fname %></div>
            </div>
          <% end %>
          <%= link_to "Logout", destroy_user_session_path, data: {turbo_method: :delete}, class: "text-decoration-none logout" %>
        </div>
      </div>
    <% end %>
  </div> 
</nav>